import{i as M,a3 as S,w as l,n as k,aJ as U,o as q,b as r,f as B,d as e,b5 as t,a6 as w,l as F,h as A}from"./index-DU8qBm1Z.js";import{u as N,a as n}from"./vee-validate.esm-BYA3-Qxk.js";import{c as $,a as m,e as E}from"./index.esm-CM_mT7FP.js";import{v as f}from"./index-pvikSey2.js";import{V as P}from"./VContainer-ehkyAgmr.js";import{V as b}from"./VCol-DxvOoVk5.js";import{V as R}from"./VDivider-COeq6FLY.js";import{V as T}from"./VForm-BJwdomV5.js";import{V as D}from"./VRow-gJwe64rl.js";const J=w("h1",{class:"text-center"},"註冊",-1),O={class:"text-center"},Y={__name:"register",setup(j){const{api:x}=k(),h=U(),V=M(),_=$({account:m().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",o=>f.isAlphanumeric(o)),email:m().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",o=>f.isEmail(o)),password:m().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:m().oneOf([E("password")],"密碼不一致"),name:m().required("使用者真實姓名必填").min(2,"使用者真實姓名長度不符").max(200,"使用者真實姓名長度不符")}),{handleSubmit:y,isSubmitting:v}=N({validationSchema:_}),i=n("account"),d=n("email"),c=n("password"),p=n("passwordConfirm"),g=n("name"),C=y(async o=>{var a,s;try{await x.post("/user",{account:o.account,email:o.email,password:o.password,name:o.name}),V({text:"註冊成功",snackbarProps:{color:"green"}}),h.push("/login")}catch(u){console.log(u),V({text:((s=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(o,a)=>(q(),S(P,{class:"w-25"},{default:l(()=>[r(D,null,{default:l(()=>[r(b,{cols:"12"},{default:l(()=>[J]),_:1}),r(R),r(b,{cols:"12"},{default:l(()=>[r(T,{onSubmit:B(e(C),["prevent"]),disabled:e(v)},{default:l(()=>[r(t,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(i).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).value.value=s),"error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),r(t,{label:"信箱",type:"email",modelValue:e(d).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(d).value.value=s),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),r(t,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(c).value.value=s),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),r(t,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),r(t,{label:"真實姓名",minlength:"2",maxlength:"200",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":a[4]||(a[4]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),w("div",O,[r(F,{type:"submit",color:"green",loading:e(v)},{default:l(()=>[A("註冊")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1}))}};export{Y as default};
