import{i as k,r as y,af as h,w as s,o as n,b as o,ai as m,c as i,e as V,F as g,n as D,t as c}from"./index-D1rVZMnS.js";import{b as u}from"./route-block-B_A1xBdJ.js";import{V as b}from"./VContainer-CvW6Gi3O.js";import{V as d}from"./VCol-CPa67INW.js";import{V as w}from"./VDivider-ChXDXOIk.js";import{a as S}from"./VDataTable-D2iISWUd.js";import{V as v}from"./VRow-6aoeI-vX.js";import"./VList-BBrZecQj.js";import"./ssrBoot-sUAhX7jW.js";const x=m("h1",{class:"text-center"},"訂單管理",-1),A={__name:"orders",setup(B){const{apiAuth:p}=D(),f=k(),l=y([]),_=[{title:"編號",key:"_id"},{title:"帳號",key:"user.account"},{title:"訂購日期",key:"createdAt",value:a=>new Date(a.createdAt).toLocaleString()},{title:"訂房時間",key:"date",value:a=>a.cart.map(e=>{if(e.date&&e.date.length>0){const t=new Date(e.date[0]).toISOString().split("T")[0],r=new Date(e.date[e.date.length-1]).toISOString().split("T")[0];return`${t} 至 ${r}`}return"無日期"}).join(", ")},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",value:a=>a.cart.reduce((e,t)=>e+t.quantity*t.p_id.price,0)}];return(async()=>{var a,e;try{const{data:t}=await p.get("/order/all");l.value.push(...t.result)}catch(t){console.log(t),f({text:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||"發生錯誤",snackbarProps:{color:"red"}})}})(),(a,e)=>(n(),h(b,null,{default:s(()=>[o(v,null,{default:s(()=>[o(d,{cols:"12"},{default:s(()=>[x]),_:1}),o(w),o(d,{cols:"12"},{default:s(()=>[o(S,{items:l.value,headers:_},{"item.cart":s(t=>[m("ul",null,[(n(!0),i(g,null,V(t.item.cart,r=>(n(),i("li",{key:r._id},c(r.p_id.name)+" * "+c(r.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};typeof u=="function"&&u(A);export{A as default};
