import{_ as A,i as B,r as d,u as M,a as v,o as V,c as _,b as t,w as a,d as b,F as x,e as U,f as I,V as L,g as N,h as m,t as R,j as T,k as j,l as w,m as z,n as P}from"./index-B5VHTAEL.js";import{V as k,a as C}from"./VList-CYKqhkoS.js";import{V as E}from"./VDivider-B-Z2z-78.js";import{V as $,a as q}from"./VNavigationDrawer-C6bOT0Av.js";import{V as G}from"./VForm-B0sropiN.js";import"./ssrBoot-BLmD_iOL.js";const H={__name:"admin",setup(J){const{apiAuth:y}=P(),p=B(),c=d(null),l=d({open:!1}),D=i=>{l.value.open=!0},f=()=>{l.value.open=!1,c.value.deleteFileRecord()},n=d([]),g=d([]),S=async i=>{var o,s,r;if(!((o=n.value[0])!=null&&o.error)&&!(n.value.length<1))try{const e=new FormData;n.value.length>0&&e.append("image",n.value[0].file);const{data:h}=await y.post("/photo",e);u.image=h.result,p({text:l.value.id===""?"新增成功":"編輯成功",snackbarProps:{color:"green"}}),f()}catch(e){console.log(e),p({text:((r=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:r.message)||"發生錯誤",snackbarProps:{color:"red"}})}},u=M(),F=[{to:"/admin/calendar",text:"行事曆",icon:"mdi-calendar-account"},{to:"/admin/products",text:"商品管理",icon:"mdi-shopping"},{to:"/admin/orders",text:"訂單管理",icon:"mdi-list-box"},{to:"/aboutroom",text:"立即訂房",icon:"mdi-seat-individual-suite"},{to:"/",text:"回首頁",icon:"mdi-home"}];return(i,o)=>{const s=v("vue-file-agent"),r=v("router-view");return V(),_(x,null,[t($,{permanent:""},{default:a(()=>[t(k,null,{default:a(()=>[t(C,{"prepend-avatar":b(u).image,title:b(u).name,onClick:o[0]||(o[0]=e=>D(null))},null,8,["prepend-avatar","title"])]),_:1}),t(E),t(k,null,{default:a(()=>[(V(),_(x,null,U(F,e=>t(C,{key:e.to,to:e.to,title:e.text,"prepend-icon":e.icon},null,8,["to","title","prepend-icon"])),64))]),_:1})]),_:1}),t(z,{modelValue:l.value.open,"onUpdate:modelValue":o[3]||(o[3]=e=>l.value.open=e),persistent:"",width:"500"},{default:a(()=>[t(G,{onSubmit:I(S,["prevent"]),disabled:i.isSubmitting},{default:a(()=>[t(L,null,{default:a(()=>[t(N,null,{default:a(()=>[m(R(l.value.id?"編輯大頭貼":"新增大頭貼"),1)]),_:1}),t(T,null,{default:a(()=>[t(s,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value=e),"raw-model-value":g.value,"onUpdate:rawModelValue":o[2]||(o[2]=e=>g.value=e),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:c},null,8,["modelValue","raw-model-value"])]),_:1}),t(j,null,{default:a(()=>[t(w,{color:"red",loading:i.isSubmitting,onClick:f},{default:a(()=>[m("取消")]),_:1},8,["loading"]),t(w,{color:"green",type:"submit",loading:i.isSubmitting},{default:a(()=>[m("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),t(q,{class:"page-background"},{default:a(()=>[t(r)]),_:1})],64)}}},Z=A(H,[["__scopeId","data-v-20134b01"]]);export{Z as default};
