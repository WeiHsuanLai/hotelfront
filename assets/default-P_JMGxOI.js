import{p as D,q as J,s as K,v as M,x as $,b as a,y as ee,z as te,A as ae,B as le,C as oe,D as j,E as ne,G as se,H as re,I as ie,J as ue,K as P,L as m,M as ce,N as Q,O as z,P as E,Q as de,r as I,R as ve,S as U,T as me,U as ge,W as fe,X as pe,Y as he,Z as be,$ as X,a0 as ye,a1 as Ve,l as R,_ as xe,a2 as ke,u as Se,i as we,a as q,o as v,c as N,d as c,a3 as T,w as d,F as H,e as G,a4 as C,a5 as _e,h as A,a6 as Be,f as Te,V as Ce,g as Le,t as O,j as Pe,k as Ie,m as Ne,n as He}from"./index-DjxrM9kz.js";import{u as Ae}from"./vee-validate.esm-BZL-kQki.js";import{a as F,V as Re}from"./VList-Buei6j9H.js";import{V as De,a as Ee}from"./VNavigationDrawer-Cx1Mhw_5.js";import{V as Ue}from"./VContainer-BlsM2P_3.js";import{u as Fe}from"./ssrBoot-C0hcEdkP.js";import{V as Me}from"./VForm-D9XIoMYC.js";import{V as W}from"./VBadge-DU-TJ5xW.js";import"./VDivider-BcnLaL48.js";const $e=D({text:String,...J(),...K()},"VToolbarTitle"),ze=M()({name:"VToolbarTitle",props:$e(),setup(t,k){let{slots:e}=k;return $(()=>{const g=!!(e.default||e.text||t.text);return a(t.tag,{class:["v-toolbar-title",t.class],style:t.style},{default:()=>{var i;return[g&&a("div",{class:"v-toolbar-title__placeholder"},[e.text?e.text():t.text,(i=e.default)==null?void 0:i.call(e)])]}})}),{}}}),qe=[null,"prominent","default","comfortable","compact"],Z=D({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>qe.includes(t)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ee(),...J(),...te(),...ae(),...K({tag:"header"}),...le()},"VToolbar"),Y=M()({name:"VToolbar",props:Z(),setup(t,k){var S;let{slots:e}=k;const{backgroundColorClasses:g,backgroundColorStyles:i}=oe(j(t,"color")),{borderClasses:n}=ne(t),{elevationClasses:f}=se(t),{roundedClasses:r}=re(t),{themeClasses:w}=ie(t),{rtlClasses:_}=ue(),p=P(!!(t.extended||(S=e.extension)!=null&&S.call(e))),h=m(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),b=m(()=>p.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return ce({VBtn:{variant:"text"}}),$(()=>{var L;const u=!!(t.title||e.title),y=!!(e.image||t.image),B=(L=e.extension)==null?void 0:L.call(e);return p.value=!!(t.extended||B),a(t.tag,{class:["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},g.value,n.value,f.value,r.value,w.value,_.value,t.class],style:[i.value,t.style]},{default:()=>[y&&a("div",{key:"image",class:"v-toolbar__image"},[e.image?a(z,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},e.image):a(Q,{key:"image-img",cover:!0,src:t.image},null)]),a(z,{defaults:{VTabs:{height:E(h.value)}}},{default:()=>{var s,o,V;return[a("div",{class:"v-toolbar__content",style:{height:E(h.value)}},[e.prepend&&a("div",{class:"v-toolbar__prepend"},[(s=e.prepend)==null?void 0:s.call(e)]),u&&a(ze,{key:"title",text:t.title},{text:e.title}),(o=e.default)==null?void 0:o.call(e),e.append&&a("div",{class:"v-toolbar__append"},[(V=e.append)==null?void 0:V.call(e)])])]}}),a(z,{defaults:{VTabs:{height:E(b.value)}}},{default:()=>[a(de,null,{default:()=>[p.value&&a("div",{class:"v-toolbar__extension",style:{height:E(b.value)}},[B])]})]})]})}),{contentHeight:h,extensionHeight:b}}}),je=D({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ge(t){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:e}=k;let g=0,i=0;const n=I(null),f=P(0),r=P(0),w=P(0),_=P(!1),p=P(!1),h=m(()=>Number(t.scrollThreshold)),b=m(()=>ve((h.value-f.value)/h.value||0)),S=()=>{const u=n.value;if(!u||e&&!e.value)return;g=f.value,f.value="window"in u?u.pageYOffset:u.scrollTop;const y=u instanceof Window?document.documentElement.scrollHeight:u.scrollHeight;if(i!==y){i=y;return}p.value=f.value<g,w.value=Math.abs(f.value-h.value)};return U(p,()=>{r.value=r.value||f.value}),U(_,()=>{r.value=0}),me(()=>{U(()=>t.scrollTarget,u=>{var B;const y=u?document.querySelector(u):window;y&&y!==n.value&&((B=n.value)==null||B.removeEventListener("scroll",S),n.value=y,n.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),ge(()=>{var u;(u=n.value)==null||u.removeEventListener("scroll",S)}),e&&U(e,S,{immediate:!0}),{scrollThreshold:h,currentScroll:f,currentThreshold:w,isScrollActive:_,scrollRatio:b,isScrollingUp:p,savedScroll:r}}const Oe=D({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...Z(),...fe(),...je(),height:{type:[Number,String],default:64}},"VAppBar"),We=M()({name:"VAppBar",props:Oe(),emits:{"update:modelValue":t=>!0},setup(t,k){let{slots:e}=k;const g=I(),i=pe(t,"modelValue"),n=m(()=>{var V;const o=new Set(((V=t.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:o.has("hide"),fullyHide:o.has("fully-hide"),inverted:o.has("inverted"),collapse:o.has("collapse"),elevate:o.has("elevate"),fadeImage:o.has("fade-image")}}),f=m(()=>{const o=n.value;return o.hide||o.fullyHide||o.inverted||o.collapse||o.elevate||o.fadeImage||!i.value}),{currentScroll:r,scrollThreshold:w,isScrollingUp:_,scrollRatio:p}=Ge(t,{canScroll:f}),h=m(()=>n.value.hide||n.value.fullyHide),b=m(()=>t.collapse||n.value.collapse&&(n.value.inverted?p.value>0:p.value===0)),S=m(()=>t.flat||n.value.fullyHide&&!i.value||n.value.elevate&&(n.value.inverted?r.value>0:r.value===0)),u=m(()=>n.value.fadeImage?n.value.inverted?1-p.value:p.value:void 0),y=m(()=>{var x,l;const o=Number(((x=g.value)==null?void 0:x.contentHeight)??t.height),V=Number(((l=g.value)==null?void 0:l.extensionHeight)??0);return h.value?r.value<w.value||n.value.fullyHide?o+V:o:o+V});he(m(()=>!!t.scrollBehavior),()=>{ye(()=>{h.value?n.value.inverted?i.value=r.value>w.value:i.value=_.value||r.value<w.value:i.value=!0})});const{ssrBootStyles:B}=Fe(),{layoutItemStyles:L,layoutIsReady:s}=be({id:t.name,order:m(()=>parseInt(t.order,10)),position:j(t,"location"),layoutSize:y,elementSize:P(void 0),active:i,absolute:j(t,"absolute")});return $(()=>{const o=Y.filterProps(t);return a(Y,X({ref:g,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"},t.class],style:[{...L.value,"--v-toolbar-image-opacity":u.value,height:void 0,...B.value},t.style]},o,{collapse:b.value,flat:S.value}),e)}),s}}),Ye=D({...Ve({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Je=M()({name:"VAppBarNavIcon",props:Ye(),setup(t,k){let{slots:e}=k;return $(()=>a(R,X(t,{class:["v-app-bar-nav-icon"]}),e)),{}}}),Ke=""+new URL("rowlet-DxR-zGsq.png",import.meta.url).href,Qe={__name:"default",setup(t){const{mobile:k}=ke(),e=Se(),g=we(),i=I(!1),{apiAuth:n}=He(),f=I(null),r=I({open:!1}),w=L=>{r.value.open=!0},{isSubmitting:_,handleSubmit:p}=Ae({initialValues:{quantity:1}}),h=()=>{r.value.open=!1,f.value.deleteFileRecord()},b=I([]),S=I([]),u=p(async L=>{var s,o,V;if(!((s=b.value[0])!=null&&s.error)&&!(b.value.length<1))try{const x=new FormData;b.value.length>0&&x.append("image",b.value[0].file);const{data:l}=await n.post("/photo",x);console.log(x),e.image=l.result,g({text:r.value.id===""?"新增成功":"編輯成功",snackbarProps:{color:"green"}}),h()}catch(x){console.log(x),g({text:((V=(o=x==null?void 0:x.response)==null?void 0:o.data)==null?void 0:V.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),y=m(()=>[{to:"/aboutroom",text:"客房介紹",icon:"mdi-seat-individual-suite",show:!e.isLogin||e.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!e.isLogin},{to:"/login",text:"登入",icon:"mdi-account-arrow-left",show:!e.isLogin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:!e.isLogin||e.isLogin},{to:"/orders",text:"訂單",icon:"mdi-list-box",show:e.isLogin},{to:"/admin",text:"管理",icon:"mdi-cog",show:e.isLogin&&e.isAdmin},{to:"/about",text:"關於我們",icon:"mdi-alpha-a-box-outline",show:!e.isLogin||e.isLogin}]),B=async()=>{await e.logout(),g({text:"登出成功",snackbarProps:{color:"green"}})};return m(()=>`https://api.multiavatar.com/${e.account}.png`),(L,s)=>{const o=q("router-link"),V=q("vue-file-agent"),x=q("router-view");return v(),N(H,null,[c(k)?(v(),T(De,{key:0,modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=l=>i.value=l)},{default:d(()=>[a(Re,{nav:""},{default:d(()=>[a(F,{"prepend-avatar":c(e).image,title:c(e).name[0],onClick:s[0]||(s[0]=l=>w(null))},null,8,["prepend-avatar","title"]),(v(!0),N(H,null,G(y.value,l=>(v(),N(H,{key:l.to},[l.show?(v(),T(F,{key:0,"prepend-icon":l.icon,to:l.to,title:l.text},{append:d(()=>[l.to==="/cart"&&c(e).cart>0?(v(),T(W,{key:0,color:"error",content:c(e).cart,inline:""},null,8,["content"])):C("",!0)]),_:2},1032,["prepend-icon","to","title"])):C("",!0)],64))),128)),c(e).isLogin?(v(),T(F,{key:0,"prepend-icon":"mdi-account-arrow-right",title:"登出",onClick:B})):C("",!0)]),_:1})]),_:1},8,["modelValue"])):C("",!0),a(We,null,{default:d(()=>[a(Ue,{class:"d-flex align-center",prominent:""},{default:d(()=>[a(o,{to:"/",style:{width:"70px"}},{default:d(()=>[a(Q,{src:Ke,class:"logorowelt"})]),_:1}),a(_e),c(k)?(v(),T(Je,{key:0,onClick:s[2]||(s[2]=l=>i.value=!0)})):(v(),N(H,{key:1},[(v(!0),N(H,null,G(y.value,l=>(v(),N(H,{key:l.to},[l.show?(v(),T(R,{key:0,"prepend-icon":l.icon,to:l.to},{default:d(()=>[A(O(l.text)+" ",1),l.to==="/cart"&&c(e).cart>0?(v(),T(W,{key:0,color:"red",content:c(e).cart,floating:""},null,8,["content"])):C("",!0)]),_:2},1032,["prepend-icon","to"])):C("",!0)],64))),128)),c(e).isLogin?(v(),T(F,{key:0,"prepend-avatar":c(e).image,title:c(e).name[0],onClick:s[3]||(s[3]=l=>w(null))},null,8,["prepend-avatar","title"])):C("",!0),c(e).isLogin?(v(),T(R,{key:1,"prepend-icon":"mdi-account-arrow-right",onClick:B},{default:d(()=>[A("登出")]),_:1})):C("",!0)],64))]),_:1})]),_:1}),Be("template",null,[a(Ne,{modelValue:r.value.open,"onUpdate:modelValue":s[6]||(s[6]=l=>r.value.open=l),persistent:"",width:"500"},{default:d(()=>[a(Me,{onSubmit:Te(c(u),["prevent"]),disabled:c(_)},{default:d(()=>[a(Ce,null,{default:d(()=>[a(Le,null,{default:d(()=>[A(O(r.value.id?"編輯大頭貼":"新增大頭貼"),1)]),_:1}),a(Pe,null,{default:d(()=>[a(V,{modelValue:b.value,"onUpdate:modelValue":s[4]||(s[4]=l=>b.value=l),"raw-model-value":S.value,"onUpdate:rawModelValue":s[5]||(s[5]=l=>S.value=l),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:f},null,8,["modelValue","raw-model-value"])]),_:1}),a(Ie,null,{default:d(()=>[a(R,{color:"red",loading:c(_),onClick:h},{default:d(()=>[A("取消")]),_:1},8,["loading"]),a(R,{color:"green",type:"submit",loading:c(_)},{default:d(()=>[A("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1},8,["modelValue"])]),a(Ee,{class:"page-background"},{default:d(()=>[a(x)]),_:1})],64)}}},rt=xe(Qe,[["__scopeId","data-v-d7d7fcd7"]]);export{rt as default};
