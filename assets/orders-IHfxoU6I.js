import{i as f,r as g,a3 as h,w as s,o as l,b as o,a6 as p,c,e as y,F as V,n as k,t as d}from"./index-DIJN7c7K.js";import{V as w}from"./VContainer-owqH7OsQ.js";import{V as u}from"./VCol-CRZCXSF_.js";import{V as S}from"./VDivider-EbTy41Xp.js";import{V as v}from"./VDataTable-vjNVSeQU.js";import{V as b}from"./VRow-CDdcNvxA.js";import"./VList-Dv4BuTzW.js";import"./ssrBoot-BrhWRZEA.js";import"./VMenu-yAWfIe41.js";import"./VChip-DmhYqefw.js";const x=p("h1",{class:"text-center"},"訂單查詢",-1),E={__name:"orders",setup(I){const{apiAuth:m}=k(),_=f(),i=g([]),D=[{title:"編號",key:"_id"},{title:"下訂日期",key:"createdAt",value:a=>new Date(a.createdAt).toLocaleString()},{title:"商品",key:"cart",sortable:!1},{title:"訂房時間",key:"date",value:a=>a.cart.map(e=>{if(e.date||e.date.length>0){const t=new Date(e.date[0]).toISOString().split("T")[0];let r="";if(e.date.length===1)r=new Date(new Date(t).setDate(new Date(t).getDate()+1)).toISOString().split("T")[0];else if(e.date.length>1){const n=new Date(e.date[e.date.length-1]);n.setDate(n.getDate()+1),r=n.toISOString().split("T")[0]}return`${t}入住 至 ${r} 退房`}return"無日期"}).join(", ")},{title:"金額",key:"price",value:a=>a.cart.reduce((e,t)=>`${e+t.quantity*t.p_id.price*t.date.length}元`,0)}];return(async()=>{var a,e;try{const{data:t}=await m.get("/order");i.value.push(...t.result)}catch(t){console.log(t),_({text:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||"發生錯誤",snackbarProps:{color:"red"}})}})(),(a,e)=>(l(),h(w,null,{default:s(()=>[o(b,null,{default:s(()=>[o(u,{cols:"12"},{default:s(()=>[x]),_:1}),o(S),o(u,{cols:"12"},{default:s(()=>[o(v,{items:i.value,headers:D},{"item.cart":s(t=>[p("ul",null,[(l(!0),c(V,null,y(t.item.cart,r=>(l(),c("li",{key:r._id},d(r.p_id.name)+" * "+d(r.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{E as default};
